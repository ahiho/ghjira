{"version":3,"file":"comment-execute.js","sources":["../src/actions/comment/comment-execute.ts"],"sourcesContent":["import Jira from '../../services/jira'\nimport {JiraConfig} from '../../types'\nimport getGithubEvent from '../../utils/get-github-event'\nimport getIssueKeys from '../../utils/get-issue-keys'\nimport mdToAdf from '../../utils/md-to-adf'\nimport preprocessString from '../../utils/preprocess-string'\n\nasync function execute(config: JiraConfig, rawComment: string) {\n  const githubEvent = getGithubEvent()\n\n  const jiraInstance = new Jira({\n    baseUrl: config.baseUrl,\n    email: config.email,\n    token: config.token\n  })\n\n  const issueKeys = getIssueKeys(config)\n\n  const interpolatedComment = preprocessString(rawComment, githubEvent)\n\n  const comment = mdToAdf(interpolatedComment)\n\n  for (const issueKey of issueKeys) {\n    await jiraInstance.addComment(\n      issueKey,\n      JSON.stringify({\n        body: comment\n      })\n    )\n\n    console.log(`Comment has been added to ${issueKey}: ${interpolatedComment}`)\n  }\n}\n\nexport default execute\n"],"names":["Jira","getIssueKeys"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAOA,eAAe,OAAO,CAAC,MAAkB,EAAE,UAAkB,EAAA;AAC3D,IAAA,MAAM,WAAW,GAAG,cAAc,EAAE,CAAA;AAEpC,IAAA,MAAM,YAAY,GAAG,IAAIA,IAAI,CAAC;QAC5B,OAAO,EAAE,MAAM,CAAC,OAAO;QACvB,KAAK,EAAE,MAAM,CAAC,KAAK;QACnB,KAAK,EAAE,MAAM,CAAC,KAAK;AACpB,KAAA,CAAC,CAAA;AAEF,IAAA,MAAM,SAAS,GAAGC,yBAAY,CAAC,MAAM,CAAC,CAAA;IAEtC,MAAM,mBAAmB,GAAG,gBAAgB,CAAC,UAAU,EAAE,WAAW,CAAC,CAAA;AAErE,IAAA,MAAM,OAAO,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAA;AAE5C,IAAA,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;QAChC,MAAM,YAAY,CAAC,UAAU,CAC3B,QAAQ,EACR,IAAI,CAAC,SAAS,CAAC;AACb,YAAA,IAAI,EAAE,OAAO;AACd,SAAA,CAAC,CACH,CAAA;QAED,OAAO,CAAC,GAAG,CAAC,CAAA,0BAAA,EAA6B,QAAQ,CAAK,EAAA,EAAA,mBAAmB,CAAE,CAAA,CAAC,CAAA;AAC7E,KAAA;AACH;;;;"}