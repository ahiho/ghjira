{"version":3,"file":"find-issue-key-main.js","sources":["../src/actions/find-issue-key/find-issue-key-main.ts"],"sourcesContent":["import fs from 'fs'\n\nimport * as core from '@actions/core'\nimport YAML from 'yaml'\n\nimport {cliConfigPath, configPath} from '../../constants/path'\nimport {getRequiredInput} from '../../utils/action'\n\nimport execute from './find-issue-key-execute'\n\nconst config = YAML.parse(fs.readFileSync(configPath, 'utf8'))\n\nasync function run(): Promise<void> {\n  try {\n    const inputString = getRequiredInput('string')\n    const response = await execute(config, inputString)\n\n    if (response) {\n      console.log(`Detected issueKey: ${response.issue}`)\n      console.log(`Saving ${response.issue} to ${cliConfigPath}`)\n      console.log(`Saving ${response.issue} to ${configPath}`)\n\n      const extendedConfig = Object.assign({}, config, {\n        issue: response.issue\n      })\n\n      fs.writeFileSync(configPath, YAML.stringify(extendedConfig))\n\n      return fs.appendFileSync(cliConfigPath, YAML.stringify(response.issue))\n    }\n\n    console.log('No issueKeys found.')\n    return\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error)\n    core.setFailed(message)\n    console.log(error)\n    return\n  }\n}\n\nvoid run()\n"],"names":["YAML","configPath","getRequiredInput","execute","cliConfigPath","core.setFailed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAM,MAAM,GAAGA,UAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAACC,eAAU,EAAE,MAAM,CAAC,CAAC,CAAA;AAE9D,eAAe,GAAG,GAAA;IAChB,IAAI;AACF,QAAA,MAAM,WAAW,GAAGC,uBAAgB,CAAC,QAAQ,CAAC,CAAA;QAC9C,MAAM,QAAQ,GAAG,MAAMC,mBAAO,CAAC,MAAM,EAAE,WAAW,CAAC,CAAA;AAEnD,QAAA,IAAI,QAAQ,EAAE;YACZ,OAAO,CAAC,GAAG,CAAC,CAAA,mBAAA,EAAsB,QAAQ,CAAC,KAAK,CAAE,CAAA,CAAC,CAAA;YACnD,OAAO,CAAC,GAAG,CAAC,CAAU,OAAA,EAAA,QAAQ,CAAC,KAAK,CAAO,IAAA,EAAAC,kBAAa,CAAE,CAAA,CAAC,CAAA;YAC3D,OAAO,CAAC,GAAG,CAAC,CAAU,OAAA,EAAA,QAAQ,CAAC,KAAK,CAAO,IAAA,EAAAH,eAAU,CAAE,CAAA,CAAC,CAAA;YAExD,MAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE;gBAC/C,KAAK,EAAE,QAAQ,CAAC,KAAK;AACtB,aAAA,CAAC,CAAA;AAEF,YAAA,EAAE,CAAC,aAAa,CAACA,eAAU,EAAED,UAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAA;AAE5D,YAAA,OAAO,EAAE,CAAC,cAAc,CAACI,kBAAa,EAAEJ,UAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAA;AACxE,SAAA;AAED,QAAA,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAA;QAClC,OAAM;AACP,KAAA;AAAC,IAAA,OAAO,KAAK,EAAE;AACd,QAAA,MAAM,OAAO,GAAG,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;AACtE,QAAAK,0BAAc,CAAC,OAAO,CAAC,CAAA;AACvB,QAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;QAClB,OAAM;AACP,KAAA;AACH,CAAC;AAED,KAAK,GAAG,EAAE;;"}