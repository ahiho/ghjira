{"version":3,"file":"transition-execute.js","sources":["../src/actions/transition/transition-execute.ts"],"sourcesContent":["import Jira from '../../services/jira'\n\nasync function execute(config, transitionName) {\n  const jiraInstance = new Jira({\n    baseUrl: config.baseUrl,\n    email: config.email,\n    token: config.token\n  })\n\n  const issueKey: string = config.issue\n\n  const response = await jiraInstance.getIssueTransitions(issueKey)\n\n  const {transitions} = response.body\n\n  const transitionToApply = transitions.find(\n    t => transitionName.toLowerCase() === t.name.toLowerCase()\n  )\n\n  if (!transitionToApply) {\n    console.log('Please specify transition name or transition id.')\n    console.log('Possible transitions:')\n\n    for (const t of transitions) {\n      console.log(`'${t.to.name}'`)\n    }\n\n    return\n  }\n\n  console.log(`Selected transition: ${transitionToApply.name}`)\n\n  await jiraInstance.transitionIssue(\n    issueKey,\n    JSON.stringify({\n      transition: {\n        id: transitionToApply.id\n      }\n    })\n  )\n\n  const transitionedIssue = await jiraInstance.getIssue(issueKey)\n\n  return transitionedIssue\n}\n\nexport default execute\n"],"names":["Jira"],"mappings":";;;;;;;;;;;;;;;;;;AAEA,eAAe,OAAO,CAAC,MAAM,EAAE,cAAc,EAAA;AAC3C,IAAA,MAAM,YAAY,GAAG,IAAIA,IAAI,CAAC;QAC5B,OAAO,EAAE,MAAM,CAAC,OAAO;QACvB,KAAK,EAAE,MAAM,CAAC,KAAK;QACnB,KAAK,EAAE,MAAM,CAAC,KAAK;AACpB,KAAA,CAAC,CAAA;AAEF,IAAA,MAAM,QAAQ,GAAW,MAAM,CAAC,KAAK,CAAA;IAErC,MAAM,QAAQ,GAAG,MAAM,YAAY,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAA;AAEjE,IAAA,MAAM,EAAC,WAAW,EAAC,GAAG,QAAQ,CAAC,IAAI,CAAA;IAEnC,MAAM,iBAAiB,GAAG,WAAW,CAAC,IAAI,CACxC,CAAC,IAAI,cAAc,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAC3D,CAAA;IAED,IAAI,CAAC,iBAAiB,EAAE;AACtB,QAAA,OAAO,CAAC,GAAG,CAAC,kDAAkD,CAAC,CAAA;AAC/D,QAAA,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAA;AAEpC,QAAA,KAAK,MAAM,CAAC,IAAI,WAAW,EAAE;YAC3B,OAAO,CAAC,GAAG,CAAC,CAAI,CAAA,EAAA,CAAC,CAAC,EAAE,CAAC,IAAI,CAAG,CAAA,CAAA,CAAC,CAAA;AAC9B,SAAA;QAED,OAAM;AACP,KAAA;IAED,OAAO,CAAC,GAAG,CAAC,CAAA,qBAAA,EAAwB,iBAAiB,CAAC,IAAI,CAAE,CAAA,CAAC,CAAA;IAE7D,MAAM,YAAY,CAAC,eAAe,CAChC,QAAQ,EACR,IAAI,CAAC,SAAS,CAAC;AACb,QAAA,UAAU,EAAE;YACV,EAAE,EAAE,iBAAiB,CAAC,EAAE;AACzB,SAAA;AACF,KAAA,CAAC,CACH,CAAA;IAED,MAAM,iBAAiB,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;AAE/D,IAAA,OAAO,iBAAiB,CAAA;AAC1B;;;;"}