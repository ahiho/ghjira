{"version":3,"file":"jira.js","sources":["../src/services/jira.ts"],"sourcesContent":["import {AxiosInstance, AxiosResponse} from 'axios'\n\nimport {JiraConfig} from '../types'\nimport axiosClient from '../utils/axios-client'\n\nexport default class Jira {\n  private readonly baseUrl: string\n  private readonly token: string\n  private readonly email: string\n\n  constructor({baseUrl, token, email}: JiraConfig) {\n    this.baseUrl = baseUrl\n    this.token = token\n    this.email = email\n  }\n\n  private jiraClient(): AxiosInstance {\n    const token = Buffer.from(`${this.email}:${this.token}`).toString('base64')\n\n    return axiosClient(this.baseUrl, token)\n  }\n\n  async getMyself(): Promise<AxiosResponse<any, any>> {\n    return this.jiraClient().get('/rest/api/3/myself')\n  }\n\n  async getIssues(issueId: string): Promise<AxiosResponse<any, any>> {\n    return this.jiraClient().get(`/rest/api/3/issue/${issueId}`)\n  }\n\n  async addComment(\n    issueKey: string,\n    data: any\n  ): Promise<AxiosResponse<any, any>> {\n    return this.jiraClient().post(`/rest/api/3/issue/${issueKey}/comment`, data)\n  }\n\n  async getIssueTransitions(\n    issueKey: string\n  ): Promise<AxiosResponse<any, any>> {\n    return this.jiraClient().get(`/rest/api/3/issue/${issueKey}/transitions`)\n  }\n\n  async transitionIssue(\n    issueKey: string,\n    data: any\n  ): Promise<AxiosResponse<any, any>> {\n    return this.jiraClient().post(\n      `/rest/api/3/issue/${issueKey}/transitions`,\n      data\n    )\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAKc,MAAO,IAAI,CAAA;AACN,IAAA,OAAO,CAAQ;AACf,IAAA,KAAK,CAAQ;AACb,IAAA,KAAK,CAAQ;AAE9B,IAAA,WAAA,CAAY,EAAC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAa,EAAA;AAC7C,QAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;AACtB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;AAClB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;KACnB;IAEO,UAAU,GAAA;QAChB,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA,EAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAE,CAAA,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;QAE3E,OAAO,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;KACxC;AAED,IAAA,MAAM,SAAS,GAAA;QACb,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAA;KACnD;IAED,MAAM,SAAS,CAAC,OAAe,EAAA;QAC7B,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,GAAG,CAAC,CAAqB,kBAAA,EAAA,OAAO,CAAE,CAAA,CAAC,CAAA;KAC7D;AAED,IAAA,MAAM,UAAU,CACd,QAAgB,EAChB,IAAS,EAAA;AAET,QAAA,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAA,kBAAA,EAAqB,QAAQ,CAAA,QAAA,CAAU,EAAE,IAAI,CAAC,CAAA;KAC7E;IAED,MAAM,mBAAmB,CACvB,QAAgB,EAAA;QAEhB,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,GAAG,CAAC,CAAqB,kBAAA,EAAA,QAAQ,CAAc,YAAA,CAAA,CAAC,CAAA;KAC1E;AAED,IAAA,MAAM,eAAe,CACnB,QAAgB,EAChB,IAAS,EAAA;AAET,QAAA,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAC3B,CAAA,kBAAA,EAAqB,QAAQ,CAAA,YAAA,CAAc,EAC3C,IAAI,CACL,CAAA;KACF;AACF;;;;"}